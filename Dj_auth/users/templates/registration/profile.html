{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% block content %}
<section>
  <div class="container">
    <div class="row">
     


      <div class="col-md-6 offset-md-3">
         {% if messages %}
         {% for message in messages %}
         <div class="alert alert-{{message.tags}}">
           {{message}}
         </div>
         {% endfor %}
         {% endif %}
        <div class="card profile-card-2">
          
          <div class="card-img-block">
            <img class="rounded mx-auto d-block"
              src="https://newevolutiondesigns.com/images/freebies/colorful-facebook-cover-1.jpg"
              alt="Card image cap">
          </div>
          <div class="card-body ">
            <img src="{{user.profile.image.url}}" alt="profile-image" class="profile rounded mx-auto d-block"/>
           
              <ul class="navbar-nav ">
                <li class="nav-item dropdown ">
                  <a class="nav-link dropdown-toggle short mt-2 p-0" href="#" id="navbarDropdown" role="button"
                    data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                   <h5 class="card-title text-primary m-0 ">{{user.username|capfirst}}</h5>
                  </a>
                  <div class="dropdown-menu " aria-labelledby="navbarDropdown">
                    
                 

                    <a class="dropdown-item" data-toggle="modal" data-target="#exampleModalCenter1"
                      href="{% url 'profile' %}">
                    <i class="fas fa-file-signature"></i>
                      Update Profile 
                    </a>

                    <div class="dropdown-divider"></div>

                    <a class="dropdown-item" href="{% url 'password_change' %}">
                      <i class="fas fa-star-of-life"></i>
                      Change Password
                    </a>

                    <div class="dropdown-divider"></div>

                    <a class="dropdown-item"  href="{% url 'logout' %}">
                     <i class="fas fa-angle-double-left"></i>
                      Log out
                    </a>
                  </div>
                </li>

              </ul>

            <i class="fas fa-envelope text-primary" ></i>
            <span class="card-title  text-primary ">{{user.email}}</span>

            <p class="card-text text-center mt-4">{{user.profile.bio}}</p>
            
           
           
            <!-- how to center a button down below -->
           
            <div class="col text-center">
             <button type="button" data-toggle="modal" data-target="#exampleModalCenter"
               class="btn btn-outline-primary ">Edit</button>
            </div>
              <!-- Modal for Bio -->
              <div class="modal fade " id="exampleModalCenter" tabindex="-1" role="dialog"
                aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content shadow">
                    <div class="modal-header">
                      <h5 class="modal-title text-muted" id="exampleModalLongTitle">Bio</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                     <form action="." method="POST">{% csrf_token %}
                
                      {{bioform|crispy}}
                     <div class="modal-footer">
                       <button type="button" class="btn btn-outline-primary" data-dismiss="modal">Close</button>
                       <button type="submit" class="btn btn-outline-success">Update</button>
                     </div>
                    </form>
                    </div>
                  
                  </div>
                </div>
              </div>

              <!-- <!model for update profile -->
              <div class="modal fade " id="exampleModalCenter1" tabindex="-1" role="dialog"
                aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content shadow">
                    <div class="modal-header">
                      <h5 class="modal-title text-muted" id="exampleModalLongTitle">Update Profile</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                     <form  method="POST" enctype="multipart/form-data">{% csrf_token %}

                      {{u_form|crispy}}
                      {{p_form|crispy}}

                
                      
                     <div class="modal-footer">
                       <button type="button" class="btn btn-outline-primary" data-dismiss="modal">Close</button>
                       <button type="submit" class="btn btn-outline-success">Update</button>
                     </div>
                    </form>
                    </div>
                  
                  </div>
                </div>
              </div>
        </div>
        
      </div>

     


    

    </div>
  </div>
</section>
{% endblock %}



